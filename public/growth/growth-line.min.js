var margin={top:20,right:30,bottom:30,left:40},width=830-margin.left-margin.right,height=500-margin.top-margin.bottom,parseDate=d3.time.format("%m/%d/%Y").parse,xScale=d3.time.scale().range([0,width]),yScale=d3.scale.linear().range([height,0]),xAxis=d3.svg.axis().scale(xScale).orient("bottom"),yAxis=d3.svg.axis().scale(yScale).orient("left"),subsLine=d3.svg.line().interpolate("basis").x(function(n){return xScale(n.day)}).y(function(n){return yScale(n.Subs)}),subsArea=d3.svg.area().interpolate("basis").x(function(n){return xScale(n.day)}).y0(height).y1(function(n){return yScale(n.Subs)}),directArea=d3.svg.area().interpolate("basis").x(function(n){return xScale(n.day)}).y0(height).y1(function(n){return yScale(n.Direct)});d3.csv("/growth/du_bbay.csv",function(n){var i,t;n.forEach(function(n){return n.day=parseDate(n.Day),n.Subs=parseInt(n.Subs),n.Direct=parseInt(n["Direct Wap"]),n}),i=n,console.log(i.map(function(n){return n.Direct})),xScale.domain(d3.extent(i,function(n){return n.day})),yScale.domain([0,d3.max(i,function(n){return n.Subs})]),t=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")").datum(i),t.append("path").attr("class","line subs").attr("d",subsLine),t.append("path").attr("class","area subs").attr("d",subsArea),t.append("path").attr("class","area subs direct").attr("d",directArea),t.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),t.append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-40)").attr("y",15).attr("dy",".81em").style("text-anchor","end").text("Visits")})