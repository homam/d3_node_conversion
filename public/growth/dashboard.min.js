var Dashboard;(function(n){(function(n){var i=function(n,t){return n-t.top-t.bottom},r=function(n,t){return n-t.left-t.right},t={top:20,right:30,bottom:30,left:40},h=r(880,t),c=i(500,t),u=["Direct Wap","WEB Pin","Direct SMS","Web SMS","Wap SMS","Click Tag","Link Click","Java App","Link Pin","Wap Pin","Android","GooglePlay"],f=["Wap,Pin","SMS","Billing Rule","Cust. Care","Op. Admin","IVR"],e,o,s;n.subMethodNames=u,n.unsubMethodNames=f,e=function(){function n(n,t){typeof t=="undefined"&&(t="%d/%m/%Y"),this.url=n,this.dateFormat=t}return n.prototype.load=function(){if(!this.loader){this.loader=$.Deferred();var n=this;d3.csv(n.url,function(t){var i=d3.time.format(n.dateFormat).parse;t.forEach(function(n){return n.day=i(n.Day),n.Subs=parseInt(n.Subs),n.Visits=+n.Visits,n.ActiveSubs=+n["Active Subs"],n.Unsubs=+n["Un Subs"],n.Growth=+n.Growth,u.forEach(function(t){n[t]=+n[t]}),f.forEach(function(t){n[t]=+n[t]}),n}),n.loader.resolve(t)})}return this.loader},n}(),n.DataLoader=e,o=function(){function n(n){typeof n=="undefined"&&(n=7),this.setSize=n}return n.prototype.smooth=function(n){var t=n.map(function(n){return _.clone(n)}),i=this.setSize,r=function(n){return _(n).reduce(function(n,t){return n+t},0)},u=function(n){return r(n)/n.length};return t.map(function(n,r){var e=t.slice(r,r+i),f;for(f in n)"number"==typeof n[f]&&(n[f]=u(e.map(function(n){return n[f]})));return n})},n}(),n.MovingAverageDataSmoother=o,s=function(){function n(n,u,f,e,o,s){var l,v,a;e=$.extend(_.clone(t),e||{}),o=r(o||h,e),s=i(s||c,e),l=d3.select(f).append("svg").attr("width",o+e.left+e.right).attr("height",s+e.top+e.bottom),v=l.append("g").attr("transform","translate("+e.left+","+e.top+")"),this.width=o,this.height=s,this.margin=e,this.svg=l,this.g=v,this.xScale=d3.time.scale().range([0,o]),this.yScale=d3.scale.linear().range([s,0]),this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom"),this.yAxis=d3.svg.axis().scale(this.yScale).orient("left"),a=this,n.load().done(function(n){!u||(n=u.smooth(n)),a.xScale.domain(d3.extent(n,function(n){return n.day})),a.draw(n)})}return n.prototype.draw=function(){console.log("not implemented")},n.prototype.drawXAxis=function(){var t=this.g,n=this.xAxis,i=this.height;return n.tickSize(-this.height,-this.height,-this.height),t.append("g").attr("class","x axis").attr("transform","translate(0,"+i+")").call(n).selectAll("g text").attr("transform","translate(0,5)"),this},n.prototype.drawYAxis=function(n,t){typeof t=="undefined"&&(t=!0);var i=this.g,r=this.yAxis,u=this.drawCustomYAxis(i,r,t);return u.label.attr("transform","rotate(-90) translate(-5,12)").style("text-anchor","end").text(n),this},n.prototype.drawCustomYAxis=function(n,t,i){typeof i=="undefined"&&(i=!1),i&&t.tickSize(-this.width);var r=n.append("g").attr("class","y axis"),u=r.call(t),f=u.selectAll("g text").attr("transform","translate(-2,0)"),e=r.append("text");return{group:r,tickGroups:u,texts:f,label:e}},n}(),n.Graph=s})(n.Growth||(n.Growth={}));var t=n.Growth})(Dashboard||(Dashboard={}))